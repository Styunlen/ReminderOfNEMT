<!DOCTYPE html>
<html window-frame="transparent">
<head #MainHead>
    <title>高考倒计时</title>
    <!-- <link href="./style-circle.css" rel="stylesheet" type="text/css"> -->
    <link rel="shortcuticon" href="./favicon.ico" />
    <meta charset="UTF-8"/>
    <style src="./style.css" />
    <!-- 用于开启UI调试 -->
    <style id="ui-debug" src="" />

    <script type="text/tiscript">
        $(img#menu-button).onClick = function() {
            this.popup( $(popup.menu), (2 /*popup middle-top*/ << 16) | 8 /*at anchor's middle-bottom*/);
        }
        $(#close).onClick = function() {
            //view.msgbox(#info,view.box(#position));
            var (x,y) = view.box(#position,#border,#screen);
            var pos = x.toString() + "," + y.toString();
            NA_setPos(pos);//只有通过菜单关闭才会保存位置(间接完成了窗口超出屏幕范围的判断)
            body.onAnimationEnd = ::view.close();
            body.attributes.removeClass("shown");
        }

        $(#minimize).onClick = function() {
            body.attributes.removeClass("shown");
            body.attributes.addClass("hidden");
            view.state = View.WINDOW_MINIMIZED;
            view.Test();
        }

        $(#setting).onClick = function() {
            this.sendMouseEvent({type: Event.MOUSE_DOWN,x: 0,y: 0});//隐藏popup
            this.sendMouseEvent({type: Event.MOUSE_UP,x: 0,y: 0});//隐藏popup
            var v = view.window({
                url: self.url("win_setting.html"),
                type:View.FRAME_WINDOW,
                alignment: -5,
                parameters:{hostview: this.root.ns.view}
            });
        }
        include "scripts.tis";
        include "menu-popup.tis";
    </script>
</head>
<body>
    <section id="sec_main">
        <frame #theme_view src="res:theme-waiting.png"></frame>
    </section>

    <section id="sec_menu">
        <img id="menu-button" src="./menu.png">  
        <popup .menu>
            <div.content>
                <button #close></button>
                <button #minimize style="background-color: rgba(255, 255, 255, 0.5);"></button>
                <button #setting style="background-color: rgba(255, 255, 255, 0.5);"></button>
                <p id="copyright">By 九仞</p>
            </div>
        </popup>
    </section>
</body>
</html>